# [关于本文档](http://nim-lang.org/docs/manual.html#about-this-document)

> Authors: Andreas Rumpf, Zahary Karadjov <br />
> Version: 0.13.0

注意：本文档仅仅是一个草稿！ Nim 语言的一部分特性，可能需要更细致的描述---本文档无法涵盖那么多。本文档会逐步演进，直到 1.0 版本的发布。目前来讲，它不算是最终的官方规范。

本文档描述了 Nim 语言的词汇、句法和语义。

> 译注：英文水平有限，如果有些地方实在无法理会作者意图，我就写作英文原文。如果一些内容对于语言无关紧要，也可能会省略。**每一章最上面的大标题，可以链接到官方原文，如果你想参考原文，这会比较方便。**
>
>
* **lexis** 词汇，即语言中的词和固定短语。
* **syntax** 句法，表示语言中单词在句子中的语法作用。
* **semantics** 语义，表示语言中什么样的语法是有意义的，什么样的语法是无意义的。
* **grammar** 语法，宏观的表达，涵盖语言的每个方面。

## 语言描述

我们使用巴科斯范式的一个扩展 **`译注：看下面介绍`**，来解释 Nim 语言的语法结构。在该范式中，`(a)*` 表示 0 或多个 `a`，`a+` 表示 1 或多个 `a`，`(a)?` 表示 0 或 1 个 `a`。`( )` 用来组合成员。

`&` 是一个前置操作符; `&a` 表示期望是 `a`，但并不表示使用它。后续的规则会决定如何使用。

`|` `/` 符号用来列出更多的选项，它的优先级最低。当语法解析器尝试其他选项时，`/` 会按照顺序选择。通常，`/` 确保没有语法歧义。

“抽象终端符号”以小写字母开始，内含大写字母。“字面终端符号”（含有关键字）以单引号 `'` 包裹。例子：

```ebnf
ifStmt = 'if' expr ':' stmts ('elif' expr ':' stmts)* ('else' stmts)?
```

二元操作符 `^*` 是一种简写，用来和 0 个或多个第 2 个参数进行分组。同样地 `^+` 表示 1 个或多个：`a ^+ b` 是 `a (b a)*` 的简写，`a ^* b` 是 `(a (b a)*)?` 的简写。例子：

```ebnf
arrayConstructor = '[' expr ^* ',' ']'
```

## 巴科斯范式

巴科斯范式（BNF），由 John Backus 和 Peter Naur 首次引入。它使用一种形式化符号来描述语言的语法，最早用来描述 ALGOL 60 语言 （一种和 Lisp 并列的人工智能语言）。

巴克斯范式扩展，在其基础上增加了一些新的规则。原理上，用巴克斯范式扩展定义的语法都可以用巴科斯范式表达。巴克斯范式扩展的符号规则如下：

<table>
<tr>
    <th>符号</th>
    <th>描述</th>
</tr>
<tr>
    <td>`=`</td>
    <td>定义</td>
</tr>
<tr>
    <td>`,`</td>
    <td>拼接</td>
</tr>
<tr>
    <td>`;`</td>
    <td>结束符</td>
</tr>
<tr>
    <td>`=`</td>
    <td>定义</td>
</tr>
<tr>
    <td>`|`</td>
    <td>或</td>
</tr>
<tr>
    <td>`[ ... ]`</td>
    <td>0 或者 1 个</td>
</tr>
<tr>
    <td>`{ ... }`</td>
    <td>0 或者多个</td>
</tr>
<tr>
    <td>`( ... )`</td>
    <td>组合</td>
</tr>
<tr>
    <td>`" ... "`</td>
    <td>双引号</td>
</tr>
<tr>
    <td>`' ... '`</td>
    <td>单引号</td>
</tr>
<tr>
    <td>`(* ... *)`</td>
    <td>注释</td>
</tr>
<tr>
    <td>`? ... ?`</td>
    <td>特殊序列</td>
</tr>
<tr>
    <td>`-`</td>
    <td>不包含</td>
</tr>
</table>

在本文档采用 EBNF，使用 `*` 表示 0 或多个选项，`+` 表示 1 或多个选项，`?` 表示 0 或 1 个选项。举个例子：

```ebnf
octdigit = '0'..'7'                     - 表示八进制数字： 0 到 7
digit    = '0'..'9'                     - 表示十进制数字： 0 到 9 
hexdigit = digit | 'A'..'F' | 'a'..'f'  - 表示十六进制数字： 0 到 9， A 到 F，a 到 f

ifExpr   = 'if' condExpr                - 表示 if 表达式： if 跟随条件表达式
whenExpr = 'when' condExpr              - 表示 when 表达式： when 跟随条件表达式
```