# [为什么修改进程的角色？](https://www.gnu.org/software/libc/manual/html_node/Why-Change-Persona.html#Why-Change-Persona)

**login** 程序，充分表达了为什么进程修改它的用户号和组号是必要的。当 **login** 开始运行时，它的用户号是 `root`。它的任务是启动一个 **shell**，**shell** 则使用登入用户的用户号和组号。（要完成这些任务，**login** 必须设置真实用户号和组号作为它的角色，不管怎么说，这算是特殊情况）。

这种情况更常见：一个普通用户程序需要访问一个资源，但是运行该程序的真实用户却没有访问权限。

比如，你有一个文件，但是不希望被其他用户直接读或写---可能是为了实现某些锁协议，也可能是因为你想保护文件数据的完整性或一些隐私。可以编写一个程序，通过程序来访问这个文件，并修改程序的有效号或组号，以匹配资源访问规则---这样，你可以在程序中控制用户可以访问哪些部分，怎样访问。

现在，想象一个游戏程序，它把得分保存在一个文件。游戏程序需要更新文件，不管谁在运行（都能更新）。但是，如果用户不是通过程序写入文件，而是自己直接写入，他们就可能会作弊或者破坏文件的内容结构。这当然是不受欢迎的，并且应该受到谴责。创建一个新的用户号和登录名（就叫 `games` 吧），作为文件的属主，并且使文件只可以被这个用户写入。然后，当游戏程序想要更新这个文件时，修改它的有效用户号，使之成为 `games`。实际上，这个程序必须把 `games` 作为它的角色，才能把得分写入文件。